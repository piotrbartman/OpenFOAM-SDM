language: bash

before_script:
    - sudo apt-get install libboost-dev libopenmpi-dev clang++-3.9

    - mv OpenFOAM-dev OpenFOAM-new
    - git clone --depth 1 https://github.com/OpenFOAM/OpenFOAM-dev.git
    - cp -R OpenFOAM-new OpenFOAM-dev
    
script:
    - cd OpenFOAM-dev
    - source etc/bashrc 
    - export WM_COMPILER=Clang
    - export WM_COMPILE_OPTION=Debug
    - export MAKEFLAGS='-j 2'

    - cd wmake/src 
    - make
    - cd ../..
    
    - cd src/OSspecific/POSIX/
    - ./Allwmake
    - cd ../../..
    
    - cd src
    - cd Pstream
    - wmake libso dummy
    - cd ..
    - wmake libso OpenFOAM
    - wmake libso fileFormats
    - wmake libso surfMesh
    - wmake libso triSurface
    - wmake libso meshTools
    - wmake libso finiteVolume
    - cd mesh
    - wmake libso extrudeModel
    - cd ..
    - wmake libso dynamicMesh
    - wmake libso dynamicFvMesh
    - wmake libso conversion
    - cd regionModels
    - wmake libso regionModel
    - cd ..
    - cd transportModels
    - wmake libso compressible
    - wmake libso incompressible
    - cd ..    
    - cd thermophysicalModels
    - wmake libso specie
    - wmake libso SLGThermo
    - wmake libso thermophysicalProperties
    - wmake libso basic
    - wmake libso solidSpecie
    - wmake libso reactionThermo
    - cd ..
    - cd lagrangian
    - wmake libso distributionModels
    - cd ..
    - cd regionModels
    - wmake libso surfaceFilmModels
    - cd ..
    - cd lagrangian
    - wmake libso basic
    - wmake libso solidParticle
    - cd ..
    - wmake libso sampling
    - cd TurbulenceModels
    - wmake libso turbulenceModels
    - wmake incompressible
    - cd ..
    - wmake libso fvOptions
    - cd lagrangian
    - wmake libso intermediate
    - wmake libso turbulence
    - cd ..
    - cd ..

    - cd applications/solvers/lagrangian/DPMFoam 
    - ./Allwmake
    - cd ../../../..
